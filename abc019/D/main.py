#!/usr/bin/env python3
import sys

# Generated by 2.6.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    N = int(input())
    maxDist = 0
    egde = 0
    for i in range(2, N + 1):
        print("? 1 " + str(i))
        sys.stdout.flush()
        dist = int(input())
        if maxDist < dist:
            maxDist = dist
            egde = i
    diameter = 0
    for i in range(1, N + 1):
        if i == egde:
            continue
        print("? " + str(egde) + " " + str(i))
        sys.stdout.flush()
        dist = int(input())
        diameter = max(diameter, dist)
    print("! " + str(diameter))
    return

if __name__ == '__main__':
    main()
