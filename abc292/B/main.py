#!/usr/bin/env python3

YES = "Yes"  # type: str
NO = "No"  # type: str


# Generated by 2.12.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    N, Q = map(int, input().split())
    l = [[0, 0] for _ in range(N)]
    for _ in range(Q):
        t, x = map(int, input().split())
        if t == 1:
            l[x - 1][0] += 1
        elif t == 2:
            l[x - 1][1] += 1
        else:
            if l[x - 1][0] >= 2 or l[x - 1][1] >= 1:
                print(YES)
            else:
                print(NO)
    return

if __name__ == '__main__':
    main()
