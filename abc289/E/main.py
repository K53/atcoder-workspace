#!/usr/bin/env python3
from collections import deque


# Generated by 2.12.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    T = int(input())
    INF = 10 ** 9
    for _ in range(T):
        N, M = map(int, input().split())
        *C, = map(int, input().split())
        G = [[] for _ in range(N)]
        for _ in range(M):
            uu, vv = map(int, input().split())
            G[uu - 1].append(vv - 1)
            G[vv - 1].append(uu - 1)
        
        q = deque()
        dist = [[INF] * N for _ in range(N)]
        q.append((0, N - 1))
        dist[0][N - 1] = 0
        while q:
            now1, now2 = q.popleft()
            for next1 in G[now1]:
                for next2 in G[now2]:
                    if C[next1] == C[next2]:
                        continue
                    if dist[next1][next2] != INF:
                        continue
                    q.append((next1, next2))
                    dist[next1][next2] = dist[now1][now2] + 1
        ans = dist[N - 1][0]
        print(ans if ans != INF else -1)
    return

if __name__ == '__main__':
    main()
