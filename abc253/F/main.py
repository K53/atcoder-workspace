#!/usr/bin/env python3


# Generated by 2.12.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    N, M ,Q  = map(int, input().split())
    query = []
    nums = {}
    yy = {}
    for i in range(Q):
        query.append(list(map(int, input().split())))
        if query[0] == 3:
            nums[i] = (query[1], query[2])

    for i, qq in enumerate(query[::-1]):
        s = set()
        if qq[0] == 2:
            for ss in s:
                yy[ss] = qq[1]
        if qq[0] == 3:
            s.add(i)
    print(yy)



if __name__ == '__main__':
    main()
