#!/usr/bin/env python3


# Generated by 2.12.0 https://github.com/kyuridenamida/atcoder-tools  (tips: You use the default template now. You can remove this line by using your custom template)
def main():
    H, W = map(int, input().split())
    cy, cx = map(lambda x: int(x) - 1, input().split())
    gy, gx = map(lambda x: int(x) - 1, input().split())
    G = [input() for _ in range(H)]
    INF = 10 ** 16
    from collections import deque
    q = deque()
    dist = [[INF] * W for _ in range(H)]
    q.append((cy, cx))
    dist[cy][cx] = 0
    while q:
        nowy, nowx = q.popleft()
        for dx in range(-2, 2 + 1):
            for dy in range(-2, 2 + 1):
                if (dx, dy) == (0, 0):
                    continue 
                if (dx, dy) in [(0, 1), (1, 0), (-1, 0), (0, -1)]:
                    nexty = nowy + dy
                    nextx = nowx + dx
                    if nexty < 0 or nextx < 0 or nexty >= H or nextx >= W or dist[nexty][nextx] <= dist[nowy][nowx] or G[nexty][nextx] == "#":
                        continue
                    q.appendleft((nexty, nextx))
                    dist[nexty][nextx] = dist[nowy][nowx]
                else:
                    nexty = nowy + dy
                    nextx = nowx + dx
                    if nexty < 0 or nextx < 0 or nexty >= H or nextx >= W or dist[nexty][nextx] <= dist[nowy][nowx] + 1 or G[nexty][nextx] == "#":
                        continue
                    q.append((nexty, nextx))
                    dist[nexty][nextx] = dist[nowy][nowx] + 1
    ans = dist[gy][gx]
    print(ans if ans != INF else -1)
    
        

if __name__ == '__main__':
    main()
